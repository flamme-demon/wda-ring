{"version":3,"file":"assets/js/ring.js","mappings":"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","sources":["webpack://wazo-wda-ring-fmw/./node_modules/events/events.js","webpack://wazo-wda-ring-fmw/webpack/bootstrap","webpack://wazo-wda-ring-fmw/webpack/runtime/compat get default export","webpack://wazo-wda-ring-fmw/webpack/runtime/define property getters","webpack://wazo-wda-ring-fmw/webpack/runtime/hasOwnProperty shorthand","webpack://wazo-wda-ring-fmw/./node_modules/@wazo/euc-plugins-sdk/lib/esm/constants.js","webpack://wazo-wda-ring-fmw/./node_modules/@wazo/euc-plugins-sdk/lib/esm/app.js","webpack://wazo-wda-ring-fmw/./node_modules/@wazo/euc-plugins-sdk/lib/esm/softphone.js","webpack://wazo-wda-ring-fmw/./node_modules/i18next/dist/esm/i18next.js","webpack://wazo-wda-ring-fmw/./src/assets/js/ring.js"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// Global\nexport const EVENT_ON_LOADED = 'wazo/ON_LOADED';\nexport const EVENT_APP_UNLOADED = 'wazo/EVENT_APP_UNLOADED';\nexport const EVENT_PLUGIN_UNLOADED = 'wazo/EVENT_PLUGIN_UNLOADED';\nexport const EVENT_APP_INITIALIZE = 'wazo/EVENT_APP_INITIALIZE';\nexport const EVENT_ON_LOGOUT = 'wazo/EVENT_ON_LOGOUT';\nexport const EVENT_SEND_IFRAME_MESSAGE = 'wazo/EVENT_SEND_IFRAME_MESSAGE';\nexport const EVENT_SEND_BACKGROUND_MESSAGE = 'wazo/EVENT_SEND_BACKGROUND_MESSAGE';\nexport const EVENT_ON_IFRAME_MESSAGE = 'wazo/EVENT_ON_IFRAME_MESSAGE';\nexport const EVENT_ON_BACKGROUND_MESSAGE = 'wazo/EVENT_ON_BACKGROUND_MESSAGE';\n// WDA\nexport const EVENT_CLOSE_LEFT_PANEL = 'wazo/EVENT_CLOSE_LEFT_PANEL';\nexport const EVENT_OPEN_LEFT_PANEL = 'wazo/EVENT_OPEN_LEFT_PANEL';\nexport const EVENT_START_CALL = 'wazo/START_CALL';\nexport const EVENT_ON_CALL_INCOMING = 'wazo/EVENT_ON_CALL_INCOMING';\nexport const EVENT_ON_CALL_MADE = 'wazo/EVENT_ON_CALL_MADE';\nexport const EVENT_ON_CALL_ANSWERED = 'wazo/EVENT_ON_CALL_ANSWERED';\nexport const EVENT_ON_CALL_ACCEPTED = 'wazo/EVENT_ON_CALL_ACCEPTED';\nexport const EVENT_ON_CALL_HUNG_UP = 'wazo/EVENT_ON_CALL_HUNG_UP';\nexport const EVENT_OPEN_LINK = 'wazo/EVENT_OPEN_LINK';\nexport const EVENT_CREATE_MEETING = 'wazo/EVENT_CREATE_MEETING';\nexport const EVENT_OPEN_MEETING_LOBBY = 'wazo/EVENT_OPEN_MEETING_LOBBY';\nexport const EVENT_OPEN_SETTINGS = 'wazo/EVENT_OPEN_SETTINGS';\nexport const EVENT_ON_MEETING_CREATED = 'wazo/EVENT_ON_MEETING_CREATED';\nexport const EVENT_ROUTE_CHANGE = 'wazo/EVENT_ROUTE_CHANGE';\nexport const EVENT_WS_MESSAGE = 'wazo/EVENT_WS_MESSAGE';\nexport const EVENT_PLAY_PROGRESS_SOUND = 'wazo/EVENT_PLAY_PROGRESS_SOUND';\nexport const EVENT_PLAY_NEW_MESSAGE_SOUND = 'wazo/EVENT_PLAY_NEW_MESSAGE_SOUND';\nexport const EVENT_PLAY_INCOMING_CALL_SOUND = 'wazo/EVENT_PLAY_INCOMING_CALL_SOUND';\nexport const EVENT_PLAY_DOUBLE_CALL_SOUND = 'wazo/EVENT_PLAY_DOUBLE_CALL_SOUND';\nexport const EVENT_PLAY_HANGUP_SOUND = 'wazo/EVENT_PLAY_HANGUP_SOUND';\nexport const EVENT_STOP_CURRENT_SOUND = 'wazo/EVENT_STOP_CURRENT_SOUND';\nexport const EVENT_CONFIGURE_SOUNDS = 'wazo/EVENT_CONFIGURE_SOUNDS';\nexport const EVENT_RESET_SOUNDS = 'wazo/EVENT_RESET_SOUNDS';\nexport const EVENT_DISPLAY_NOTIFICATION = 'wazo/EVENT_DISPLAY_NOTIFICATION';\nexport const EVENT_CHANGE_NAVBAR_COLOR = 'wazo/EVENT_CHANGE_NAVBAR_COLOR';\nexport const EVENT_RESET_NAVBAR_COLOR = 'wazo/EVENT_RESET_NAVBAR_COLOR';\nexport const EVENT_DISPLAY_MODAL = 'wazo/EVENT_DISPLAY_MODAL';\nexport const EVENT_REMOVE_MODAL = 'wazo/EVENT_REMOVE_MODAL';\nexport const EVENT_USER_JOIN_ROOM = 'wazo/EVENT_USER_JOIN_ROOM';\nexport const EVENT_USER_LEAVE_ROOM = 'wazo/EVENT_USER_LEAVE_ROOM';\nexport const EVENT_PARTICIPANT_JOIN_ROOM = 'wazo/EVENT_PARTICIPANT_JOIN_ROOM';\nexport const EVENT_PARTICIPANT_LEAVE_ROOM = 'wazo/EVENT_PARTICIPANT_LEAVE_ROOM';\nexport const EVENT_IGNORE_CALL = 'wazo/EVENT_IGNORE_CALL';\nexport const EVENT_ON_NEW_SESSION = 'wazo/EVENT_ON_NEW_SESSION';\nexport const EVENT_UPDATE_BADGE = 'wazo/EVENT_UPDATE_BADGE';\nexport const EVENT_DISPLAY_BANNER = 'wazo/EVENT_DISPLAY_BANNER';\nexport const EVENT_REMOVE_BANNER = 'wazo/EVENT_REMOVE_BANNER';\n// Portal\nexport const EVENT_ON_CONNECTED_TO_STACK = 'wazo/EVENT_ON_CONNECTED_TO_STACK';\nexport const EVENT_ON_SWITCH_STACK_TENANT = 'wazo/EVENT_ON_SWITCH_STACK_TENANT';\nexport const EVENT_CHANGE_TOOLBAR_DISPLAY = 'wazo/EVENT_CHANGE_TOOLBAR_DISPLAY';\n// Mobile\nexport const EVENT_MOBILE_HEADER = 'wazo/mobile/EVENT_MOBILE_HEADER';\nexport const EVENT_MOBILE_CONTEXTUAL_MENU = 'wazo/mobile/EVENT_MOBILE_CONTEXTUAL_MENU';\nexport const EVENT_MOBILE_SHOW_BOTTOM_NAV = 'wazo/mobile/EVENT_MOBILE_SHOW_BOTTOM_NAV';\nexport const EVENT_MOBILE_ON_MENU_ACTION = 'wazo/mobile/EVENT_MOBILE_ON_MENU_ACTION';\nexport const EVENT_MOBILE_ON_HEADER_BACK = 'wazo/mobile/EVENT_MOBILE_ON_HEADER_BACK';\n","import { EVENT_ON_LOADED, EVENT_APP_UNLOADED, EVENT_PLUGIN_UNLOADED, EVENT_APP_INITIALIZE, EVENT_ON_LOGOUT, EVENT_SEND_IFRAME_MESSAGE, EVENT_SEND_BACKGROUND_MESSAGE, EVENT_ON_IFRAME_MESSAGE, EVENT_ON_BACKGROUND_MESSAGE, EVENT_CLOSE_LEFT_PANEL, EVENT_OPEN_LEFT_PANEL, EVENT_START_CALL, EVENT_ON_CALL_INCOMING, EVENT_ON_CALL_MADE, EVENT_ON_CALL_ANSWERED, EVENT_ON_CALL_ACCEPTED, EVENT_ON_CALL_HUNG_UP, EVENT_OPEN_LINK, EVENT_CREATE_MEETING, EVENT_OPEN_MEETING_LOBBY, EVENT_ON_MEETING_CREATED, EVENT_ROUTE_CHANGE, EVENT_WS_MESSAGE, EVENT_PLAY_PROGRESS_SOUND, EVENT_PLAY_NEW_MESSAGE_SOUND, EVENT_PLAY_INCOMING_CALL_SOUND, EVENT_PLAY_DOUBLE_CALL_SOUND, EVENT_PLAY_HANGUP_SOUND, EVENT_STOP_CURRENT_SOUND, EVENT_CONFIGURE_SOUNDS, EVENT_RESET_SOUNDS, EVENT_DISPLAY_NOTIFICATION, EVENT_CHANGE_NAVBAR_COLOR, EVENT_RESET_NAVBAR_COLOR, EVENT_DISPLAY_MODAL, EVENT_REMOVE_MODAL, EVENT_USER_JOIN_ROOM, EVENT_USER_LEAVE_ROOM, EVENT_PARTICIPANT_JOIN_ROOM, EVENT_PARTICIPANT_LEAVE_ROOM, EVENT_IGNORE_CALL, EVENT_ON_NEW_SESSION, EVENT_UPDATE_BADGE, EVENT_ON_CONNECTED_TO_STACK, EVENT_ON_SWITCH_STACK_TENANT, EVENT_CHANGE_TOOLBAR_DISPLAY, EVENT_MOBILE_HEADER, EVENT_MOBILE_CONTEXTUAL_MENU, EVENT_MOBILE_SHOW_BOTTOM_NAV, EVENT_MOBILE_ON_MENU_ACTION, EVENT_MOBILE_ON_HEADER_BACK, EVENT_DISPLAY_BANNER, EVENT_REMOVE_BANNER, } from './constants.js';\nconst initializationTimeoutInMs = 5000;\nexport class App {\n    constructor() {\n        // Global\n        this.onNewSession = (session) => { };\n        this.onUnLoaded = (e) => { };\n        this.onPluginUnLoaded = () => { };\n        this.onAppUnLoaded = (tabId) => { };\n        this.onIframeMessage = (message) => { };\n        this.onBackgroundMessage = (message) => { };\n        // WDA\n        this.onLogout = () => { };\n        this.onCallIncoming = (call) => { };\n        this.onCallMade = (call) => { };\n        this.onCallAnswered = (call) => { };\n        this.onCallAccepted = (call) => { };\n        this.onCallHungUp = (call) => { };\n        this.onUnHandledEvent = (event) => { };\n        this.onWebsocketMessage = (message) => { };\n        this.onMeetingCreated = (meeting) => { };\n        this.onRouteChanged = (location, action) => { };\n        this.onUserJoinRoom = (room) => { };\n        this.onUserLeaveRoom = (room) => { };\n        this.onParticipantJoinRoom = (room, participant) => { };\n        this.onParticipantLeaveRoom = (room, participant) => { };\n        // Portal\n        this.onConnectedToStack = (stackSession) => { };\n        this.onSwitchTenant = (uuid, name) => { };\n        this.initialize = async () => {\n            if (this.isInitialized()) {\n                return Promise.resolve();\n            }\n            window.addEventListener('message', this._onMessage, false);\n            return new Promise((resolve, reject) => {\n                this._sendMessage(EVENT_APP_INITIALIZE, { bg: this._isBackground, pluginId: this._pluginId });\n                this._initializeTimeout = setTimeout(() => {\n                    this._initializeTimeout = null;\n                    reject('SDK initialize timeout');\n                }, initializationTimeoutInMs);\n                this._initializeResolve = resolve;\n            });\n        };\n        this.isInitialized = () => {\n            return this._initializeCompleted;\n        };\n        // Global\n        this.getContext = () => this.context;\n        this.sendMessageToIframe = (payload) => this._sendMessage(EVENT_SEND_IFRAME_MESSAGE, { payload });\n        this.sendMessageToBackground = (payload) => this._sendMessage(EVENT_SEND_BACKGROUND_MESSAGE, { payload });\n        // WDA\n        this.startCall = ({ targets, requestedModalities = ['audio'] }) => {\n            this._sendMessage(EVENT_START_CALL, { targets, requestedModalities });\n        };\n        this.openLink = (url) => {\n            this._sendMessage(EVENT_OPEN_LINK, { url });\n        };\n        this.createMeeting = (name, requireAuthorization = false, persistent = false) => {\n            this._sendMessage(EVENT_CREATE_MEETING, { name, requireAuthorization, persistent });\n        };\n        this.openMeetingLobby = (extension) => {\n            this._sendMessage(EVENT_OPEN_MEETING_LOBBY, { extension });\n        };\n        this.openSettings = () => {\n            // @TODO: Fix it in WDA\n            // this._sendMessage(EVENT_OPEN_SETTINGS);\n        };\n        this.closeLeftPanel = () => this._sendMessage(EVENT_CLOSE_LEFT_PANEL);\n        this.openLeftPanel = () => this._sendMessage(EVENT_OPEN_LEFT_PANEL);\n        this.playProgressSound = () => this._sendMessage(EVENT_PLAY_PROGRESS_SOUND);\n        this.playNewMessageSound = () => this._sendMessage(EVENT_PLAY_NEW_MESSAGE_SOUND);\n        this.playIncomingCallSound = () => this._sendMessage(EVENT_PLAY_INCOMING_CALL_SOUND);\n        this.playDoubleCallSound = () => this._sendMessage(EVENT_PLAY_DOUBLE_CALL_SOUND);\n        this.playHangupSound = () => this._sendMessage(EVENT_PLAY_HANGUP_SOUND);\n        this.stopCurrentSound = () => this._sendMessage(EVENT_STOP_CURRENT_SOUND);\n        this.configureSounds = (sounds) => this._sendMessage(EVENT_CONFIGURE_SOUNDS, { sounds });\n        this.resetSounds = () => this._sendMessage(EVENT_RESET_SOUNDS);\n        this.changeNavBarColor = (color) => this._sendMessage(EVENT_CHANGE_NAVBAR_COLOR, { color });\n        this.resetNavBarColor = () => this._sendMessage(EVENT_RESET_NAVBAR_COLOR);\n        this.displayNotification = (title, text) => this._sendMessage(EVENT_DISPLAY_NOTIFICATION, { title, text });\n        this.displayModal = ({ url, title, text, htmlText, height, width, hideCloseButton }) => this._sendMessage(EVENT_DISPLAY_MODAL, { url, title, text, htmlText, height, width, hideCloseButton });\n        this.removeModal = () => this._sendMessage(EVENT_REMOVE_MODAL);\n        this.hasLocalVideoStream = (call) => Wazo.Phone.phone.hasALocalVideoTrack(call);\n        this.getLocalCurrentVideoStream = (call) => Wazo.Phone.phone.getLocalVideoStream(call);\n        this.hasRemoveVideoStream = (call) => Wazo.Phone.phone.hasRemoteVideo(call);\n        this.getRemoteVideoStream = (call) => Wazo.Phone.phone.getRemoteVideoStream(call);\n        this.updateBadge = (args) => this._sendMessage(EVENT_UPDATE_BADGE, { ...args, entityId: args.entityId || this._entityId || 'update-badge-null-entity-id' });\n        this.displayBanner = (args) => this._sendMessage(EVENT_DISPLAY_BANNER, { ...args, entityId: this._entityId || 'display-banner-null-entity-id' });\n        this.closeBanner = () => this._sendMessage(EVENT_REMOVE_BANNER, { entityId: this._entityId || 'remove-banner-null-entity-id' });\n        // Portal\n        this.changeToolbarDisplay = (display) => this._sendMessage(EVENT_CHANGE_TOOLBAR_DISPLAY, { display });\n        // App to Mobile\n        this.setMobileHeader = ({ title, callback }, entityId) => {\n            const id = entityId || this._entityId;\n            if (id) {\n                delete this._headerBackCallbacks[id];\n                if (typeof callback === 'function') {\n                    this._headerBackCallbacks[id] = callback;\n                }\n            }\n            this._sendMessage(EVENT_MOBILE_HEADER, {\n                headerTitle: title,\n                emitHeaderBack: !!callback,\n                entityId: entityId || this._entityId,\n            });\n        };\n        // @WIP\n        this.setMobileContextualMenu = (contextualMenu, entityId) => this._sendMessage(EVENT_MOBILE_CONTEXTUAL_MENU, { contextualMenu, entityId: entityId || this._entityId });\n        // @WIP\n        this.setMobileShowBottomNav = (showBottomNav, entityId) => this._sendMessage(EVENT_MOBILE_SHOW_BOTTOM_NAV, { showBottomNav, entityId: entityId || this._entityId });\n        // Mobile to app\n        // @WIP\n        this.onMobileMenuAction = (id) => this.sendMessageToIframe({ type: EVENT_MOBILE_ON_MENU_ACTION, id });\n        this._onMessage = (event) => {\n            if (!event.data) {\n                return;\n            }\n            switch (event.data.type) {\n                // Global\n                case EVENT_ON_LOADED:\n                    this._onLoaded(event.data.session, event.data.theme, event.data.locale, event.data.extra);\n                    break;\n                case EVENT_APP_UNLOADED:\n                    delete this._headerBackCallbacks[event.data.tabId];\n                    this.onAppUnLoaded(event.data.tabId);\n                    break;\n                case EVENT_PLUGIN_UNLOADED:\n                    this._unloadPlugin();\n                    break;\n                case EVENT_ON_LOGOUT:\n                    this.onLogout();\n                    this._unloadPlugin();\n                    break;\n                case EVENT_ON_NEW_SESSION:\n                    this.onNewSession(event.data.session);\n                    break;\n                case EVENT_ON_IFRAME_MESSAGE:\n                    if (event.data._pluginId === this._pluginId) {\n                        this.onIframeMessage(event.data.payload);\n                    }\n                    break;\n                case EVENT_ON_BACKGROUND_MESSAGE:\n                    if (event.data._pluginId === this._pluginId) {\n                        this.onBackgroundMessage(event.data.payload);\n                    }\n                    break;\n                case EVENT_USER_JOIN_ROOM:\n                    this.onUserJoinRoom(event.data.room);\n                    break;\n                case EVENT_USER_LEAVE_ROOM:\n                    this.onUserLeaveRoom(event.data.room);\n                    break;\n                case EVENT_PARTICIPANT_JOIN_ROOM:\n                    this.onParticipantJoinRoom(event.data.room, event.data.participant);\n                    break;\n                case EVENT_PARTICIPANT_LEAVE_ROOM:\n                    this.onParticipantLeaveRoom(event.data.room, event.data.participant);\n                    break;\n                // WDA\n                case EVENT_WS_MESSAGE:\n                    this.onWebsocketMessage(event.data.message);\n                    break;\n                case EVENT_ON_MEETING_CREATED:\n                    this.onMeetingCreated(event.data.meeting);\n                    break;\n                case EVENT_ROUTE_CHANGE:\n                    this.onRouteChanged(event.data.location, event.data.action);\n                    break;\n                case EVENT_ON_CALL_INCOMING:\n                    this.onCallIncoming(event.data.call);\n                    break;\n                case EVENT_ON_CALL_MADE:\n                    this.onCallMade(event.data.call);\n                    break;\n                case EVENT_ON_CALL_ANSWERED:\n                    this.onCallAnswered(event.data.call);\n                    break;\n                case EVENT_ON_CALL_ACCEPTED:\n                    this.onCallAccepted(event.data.call);\n                    break;\n                case EVENT_ON_CALL_HUNG_UP:\n                    this.onCallHungUp(event.data.call);\n                    break;\n                // Portal\n                case EVENT_ON_CONNECTED_TO_STACK:\n                    this.onConnectedToStack(event.data.stackSession);\n                    break;\n                case EVENT_ON_SWITCH_STACK_TENANT:\n                    this.onSwitchTenant(event.data.tenant.uuid, event.data.tenant.name);\n                    break;\n                // Mobile\n                case EVENT_MOBILE_ON_HEADER_BACK:\n                    const action = this._headerBackCallbacks[event.data.entityId || this._entityId];\n                    if (typeof action === 'function') {\n                        action();\n                    }\n                    break;\n                case EVENT_MOBILE_ON_MENU_ACTION:\n                    this.onMobileMenuAction(event.data);\n                    break;\n                default:\n                    this.onUnHandledEvent(event);\n                    break;\n            }\n        };\n        this._sendMessage = (type, payload = {}) => {\n            if (!this.isInitialized() && type !== EVENT_APP_INITIALIZE) {\n                this._queuedMessages.push({ type, payload });\n                return;\n            }\n            // @ts-ignore\n            if (window.ReactNativeWebView) {\n                // @ts-ignore (Mobile)\n                return window.ReactNativeWebView.postMessage(JSON.stringify({ type, _pluginId: this._pluginId, _entityId: this._entityId, ...payload }));\n            }\n            window.parent.postMessage({ type, _pluginId: this._pluginId, _entityId: this._entityId, ...payload }, '*');\n        };\n        this._sendQueuedMessages = () => {\n            this._queuedMessages.forEach(({ type, payload }) => {\n                this._sendMessage(type, payload);\n            });\n        };\n        this._onLoaded = (session, theme, locale, extra) => {\n            if (this._initializeTimeout === null || this.isInitialized()) {\n                return;\n            }\n            clearTimeout(this._initializeTimeout);\n            this._initializeCompleted = true;\n            this.context.app = {\n                locale,\n                theme,\n                host: {\n                    clientType: extra ? extra.clientType : null,\n                },\n                extra: {\n                    ...extra,\n                    baseUrl: this._baseUrl,\n                    pluginId: this._pluginId,\n                },\n            };\n            this.context.user = session;\n            if (this._initializeResolve) {\n                this._initializeResolve();\n            }\n            this._sendQueuedMessages();\n        };\n        // Deprecated, we should use `_configurePlugin` instead\n        this._setPluginId = (pluginId) => {\n            this._pluginId = pluginId;\n        };\n        this._unloadPlugin = () => {\n            this.onPluginUnLoaded();\n            this._resetEvents();\n        };\n        this._configurePlugin = (configuration) => {\n            if (configuration.pluginId) {\n                this._pluginId = configuration.pluginId;\n            }\n            if (configuration.baseUrl) {\n                this._baseUrl = configuration.baseUrl;\n            }\n            if (configuration.entityId) {\n                this._entityId = configuration.entityId;\n            }\n        };\n        this._resetEvents = () => {\n            this.onUnLoaded = (e) => { };\n            this.onPluginUnLoaded = () => { };\n            this.onAppUnLoaded = (tabId) => { };\n            this.onIframeMessage = (message) => { };\n            this.onBackgroundMessage = (message) => { };\n            // WDA\n            this.onLogout = () => { };\n            this.onNewSession = (session) => { };\n            this.onCallIncoming = (call) => { };\n            this.onCallMade = (call) => { };\n            this.onCallAnswered = (call) => { };\n            this.onCallAccepted = (call) => { };\n            this.onCallHungUp = (call) => { };\n            this.onUnHandledEvent = (event) => { };\n            this.onWebsocketMessage = (message) => { };\n            this.onMeetingCreated = (meeting) => { };\n            this.onRouteChanged = (location, action) => { };\n            // Portal\n            this.onConnectedToStack = (stackSession) => { };\n            this.onSwitchTenant = (uuid, name) => { };\n        };\n        this._resetEvents();\n        this._initializeCompleted = false;\n        this._initializeResolve = null;\n        this._initializeTimeout = null;\n        this._pluginId = globalThis?.pluginId || null;\n        this._baseUrl = null;\n        this._entityId = null;\n        this._isBackground = !window.name;\n        this._queuedMessages = [];\n        this._headerBackCallbacks = {};\n        this.context = {\n            app: {\n                locale: null,\n                theme: null,\n                host: {\n                    clientType: null,\n                },\n                extra: null,\n            },\n        };\n        // Can't be simplified as `window.onunload = this.onUnLoaded`\n        // because `this.onUnLoaded` might not have been overridden by the module yet.\n        window.onunload = (e) => {\n            this.onUnLoaded(e);\n        };\n        // Used to fetch pluginId when loaded in an iframe\n        if (window.name) {\n            try {\n                // Is window.name a valid JSON ?\n                this._configurePlugin(JSON.parse(window.name));\n            }\n            catch (_) {\n                // Deprecated way to do it, remove it in future version\n                this._configurePlugin({ pluginId: window.name });\n            }\n        }\n        // We expose a global method to be used in the <script> tag directly after importing the `backgroundScript` url\n        // Also used in mobile\n        globalThis._setPluginId = this._setPluginId;\n        globalThis._configurePlugin = this._configurePlugin;\n    }\n    ignoreCall(call) {\n        this._sendMessage(EVENT_IGNORE_CALL, { call });\n    }\n}\n// @deprecated: can conflict with other app when using the instance directly\nexport default new App();\n","/* eslint-disable no-unused-vars */\n/* global window, document */\nimport EventEmitter from 'events';\nconst BRIDGE_CONFIG_RETRIEVED = 'bridge/CONFIG_RETRIEVED';\nconst BRIDGE_LOGGED_OUT = 'bridge/LOGGED_OUT';\nconst BRIDGE_CREATE_OR_UPDATE_CARD = 'bridge/BRIDGE_CREATE_OR_UPDATE_CARD';\nconst BRIDGE_OPTIONS_FETCHED = 'bridge/BRIDGE_OPTIONS_FETCHED';\nconst BRIDGE_OPTIONS_FOUND = 'bridge/BRIDGE_OPTIONS_FOUND';\nconst BRIDGE_SEARCH_OPTIONS = 'bridge/BRIDGE_SEARCH_OPTIONS';\nconst BRIDGE_DISPLAY_LINKED_OPTION = 'bridge/DISPLAY_LINKED_OPTION';\nconst BRIDGE_UPDATE_FORM_SCHEMA = 'bridge/BRIDGE_UPDATE_FORM_SCHEMA';\nconst BRIDGE_WAZO_CONTACT_SEARCH = 'bridge/BRIDGE_WAZO_CONTACT_SEARCH';\nconst BRIDGE_ON_AGENT_LOGGED_IN = 'bridge/BRIDGE_ON_AGENT_LOGGED_IN';\nconst BRIDGE_ON_AGENT_LOGGED_OUT = 'bridge/BRIDGE_ON_AGENT_LOGGED_OUT';\nconst BRIDGE_ON_AGENT_PAUSED = 'bridge/BRIDGE_ON_AGENT_PAUSED';\nconst BRIDGE_ON_AGENT_RESUMED = 'bridge/BRIDGE_ON_AGENT_RESUMED';\nconst BRIDGE_ON_LANGUAGE_CHANGED = 'bridge/BRIDGE_ON_LANGUAGE_CHANGED';\nconst BRIDGE_ON_CALL_LOCALLY_ACCEPTED = 'bridge/BRIDGE_ON_CALL_LOCALLY_ACCEPTED';\nconst BRIDGE_ON_CALL_REJECTED = 'bridge/BRIDGE_ON_CALL_REJECTED';\nconst BRIDGE_ON_CALL_ESTABLISHED = 'bridge/BRIDGE_ON_CALL_ESTABLISHED';\nconst BRIDGE_ON_CALL_HELD = 'bridge/BRIDGE_ON_CALL_HELD';\nconst BRIDGE_ON_CALL_RESUMED = 'bridge/BRIDGE_ON_CALL_RESUMED';\nconst BRIDGE_ON_CALL_MUTED = 'bridge/BRIDGE_ON_CALL_MUTED';\nconst BRIDGE_ON_CALL_UN_MUTED = 'bridge/BRIDGE_ON_CALL_UN_MUTED';\nconst BRIDGE_ON_DTMF = 'bridge/BRIDGE_ON_DTMF';\nconst BRIDGE_ON_DIRECT_TRANSFER = 'bridge/BRIDGE_ON_DIRECT_TRANSFER';\nconst BRIDGE_ON_CREATE_INDIRECT_TRANSFER = 'bridge/BRIDGE_ON_CREATE_INDIRECT_TRANSFER';\nconst BRIDGE_ON_CANCEL_INDIRECT_TRANSFER = 'bridge/BRIDGE_ON_CANCEL_INDIRECT_TRANSFER';\nconst BRIDGE_ON_CONFIRM_INDIRECT_TRANSFER = 'bridge/BRIDGE_ON_CONFIRM_INDIRECT_TRANSFER';\nconst BRIDGE_ON_INDIRECT_TRANSFER_CALL_MADE = 'bridge/BRIDGE_ON_INDIRECT_TRANSFER_CALL_MADE';\nconst BRIDGE_ON_INDIRECT_TRANSFER_DONE = 'bridge/BRIDGE_ON_INDIRECT_TRANSFER_DONE';\nconst BRIDGE_ON_START_RECORDING = 'bridge/BRIDGE_ON_START_RECORDING';\nconst BRIDGE_ON_STOP_RECORDING = 'bridge/BRIDGE_ON_STOP_RECORDING';\nconst BRIDGE_ON_CARD_CANCELED = 'bridge/BRIDGE_ON_CARD_CANCELED';\nconst BRIDGE_ENABLE_AGENT = 'bridge/BRIDGE_ENABLE_AGENT';\nconst BRIDGE_SET_CARD_CONTENT = 'bridge/BRIDGE_SET_CARD_CONTENT';\nconst BRIDGE_ENABLE_DEBUG = 'bridge/BRIDGE_ENABLE_DEBUG';\nconst BRIDGE_CALL_LOG_CREATED = 'bridge/BRIDGE_CALL_LOG_CREATED';\nconst BRIDGE_ON_WEBSOCKET_MESSAGE = 'bridge/BRIDGE_ON_WEBSOCKET_MESSAGE';\nconst BRIDGE_LOGIN_WITH_TOKEN = 'bridge/BRIDGE_LOGIN_WITH_TOKEN';\nconst BRIDGE_ON_CLICK_TO_CALL = 'bridge/ON_CLICK_TO_CALL';\nconst BRIDGE_INJECT_CSS = 'bridge/BRIDGE_INJECT_CSS';\nconst BRIDGE_CUSTOMIZE_APPEARANCE = 'bridge/BRIDGE_CUSTOMIZE_APPEARANCE';\nconst SDK_ON_OUTGOING_CALL_MADE = 'sdk/SDK_ON_OUTGOING_CALL_MADE';\nconst SDK_CALL_ENDED = 'sdk/ON_CALL_ENDED';\nconst SDK_CALL_INCOMING = 'sdk/SDK_CALL_INCOMING';\nconst SDK_AUTHENTICATED = 'sdk/SDK_AUTHENTICATED';\n// Events\nexport const SHOW = 'show';\nexport const HIDE = 'hide';\nclass Softphone extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.url = 'https://softphone.wazo.io';\n        this.width = 500;\n        this.height = 600;\n        this.iframeCss = { left: 0, bottom: 0 };\n        this.displayed = false;\n        this.wrapper = null;\n        this.iframe = null;\n        this.iframeLoaded = false;\n        this.session = null;\n        // Message waiting for the iframe to be loaded\n        this._pendingMessages = [];\n    }\n    onLinkEnabled(link) { }\n    onIFrameLoaded() { }\n    onCallLocallyAnswered(call) { }\n    onCallEstablished(call) { }\n    onOutgoingCallMade(call) { }\n    onCallIncoming(call) { }\n    onCallRejected(call) { }\n    onCallEnded(call, card, direction, fromExtension) { }\n    onCardSaved(card) { }\n    onCardCanceled() { }\n    onAuthenticated(session) { }\n    onLoggedOut() { }\n    onSearchOptions(fieldId, query) {\n        this.onOptionsResults(fieldId, []);\n    }\n    onDisplayLinkedOption(optionId) { }\n    onWazoContactSearch(query) { }\n    onAgentLoggedIn() { }\n    onAgentLoggedOut() { }\n    onAgentPaused() { }\n    onAgentResumed() { }\n    onLanguageChanged(language) { }\n    onCallHeld() { }\n    onCallResumed() { }\n    onCallMuted() { }\n    onCallUnMuted() { }\n    onDtmfSent(tone) { }\n    onDirectTransfer(number) { }\n    onCreateIndirectTransfer(number) { }\n    onCancelIndirectTransfer() { }\n    onConfirmIndirectTransfer() { }\n    onIndirectCallMade(call) { }\n    onIndirectTransferDone(call) { }\n    onStartRecording() { }\n    onStopRecording() { }\n    onCallLogCreated(callLog) { }\n    onWebsocketMessage(message) { }\n    onUnHandledEvent(event) { }\n    init({ url, width, height, server, port, language, wrapUpDuration, iframeCss, enableAgent = true, tenantId, domainName, debug = false, disableAutoLogin = false, }) {\n        this.url = url || this.url;\n        this.width = width || this.width;\n        this.height = height || this.height;\n        this.iframeCss = iframeCss || this.iframeCss;\n        this.displayed = false;\n        this.iframeLoaded = false;\n        this.iframeLoaded = false;\n        this._pendingMessages = [];\n        window.addEventListener('message', this._onMessage.bind(this), false);\n        if (!server) {\n            throw new Error('`server` is not set');\n        }\n        const config = { server, disableAutoLogin };\n        if (language) {\n            config.language = language;\n        }\n        if (port) {\n            config.port = port;\n        }\n        if (tenantId) {\n            console.warn('Use of `tenantId` is deprecated when calling `Softphone.init()`, use `domainName` instead');\n            config.tenantId = tenantId;\n        }\n        if (domainName) {\n            config.domainName = domainName;\n        }\n        if (wrapUpDuration) {\n            config.wrapUpDuration = wrapUpDuration;\n        }\n        this._sendMessage(BRIDGE_CONFIG_RETRIEVED, { config });\n        if (enableAgent) {\n            this._sendMessage(BRIDGE_ENABLE_AGENT);\n        }\n        if (debug) {\n            this._sendMessage(BRIDGE_ENABLE_DEBUG);\n        }\n        this._createIframe(() => {\n            this.iframeLoaded = true;\n            this._pendingMessages.forEach(([type, payload]) => this._sendMessage(type, payload));\n            this.onIFrameLoaded();\n        });\n    }\n    parseLinks() {\n        const links = this._getLinks();\n        links.forEach((link) => {\n            link.setAttribute('data-wazo-parsed', 'true');\n            link.addEventListener('click', this._onLinkClick.bind(this));\n            this.onLinkEnabled(link);\n        });\n    }\n    removeParsedLinksEvent() {\n        [].slice.call(document.querySelectorAll('a[data-wazo-parsed]'), 0).forEach((link) => {\n            link.removeAttribute('data-wazo-parsed');\n            link.removeEventListener('click', this._onLinkClick.bind(this));\n        });\n    }\n    makeCall(number) {\n        this.show();\n        this._sendMessage(BRIDGE_ON_CLICK_TO_CALL, { number });\n    }\n    toggleDisplay() {\n        if (this.displayed) {\n            this.hide();\n        }\n        else {\n            this.show();\n        }\n    }\n    show() {\n        if (!this.iframe) {\n            this._createIframe();\n        }\n        if (this.iframe) {\n            this.iframe.style.display = 'block';\n        }\n        this.displayed = true;\n        this.emit(SHOW);\n    }\n    hide() {\n        if (this.iframe) {\n            this.iframe.style.display = 'none';\n        }\n        this.displayed = false;\n        this.emit(HIDE);\n    }\n    remove() {\n        if (this.iframe) {\n            this.iframe.remove();\n        }\n        if (this.wrapper) {\n            this.wrapper.remove();\n        }\n        this.iframe = null;\n        this.wrapper = null;\n    }\n    optionsFetched(fieldId, options) {\n        this._sendMessage(BRIDGE_OPTIONS_FETCHED, { fieldId, options });\n    }\n    onOptionsResults(fieldId, options) {\n        this._sendMessage(BRIDGE_OPTIONS_FOUND, { fieldId, options });\n    }\n    setFormSchema(schema, uiSchema) {\n        this._sendMessage(BRIDGE_UPDATE_FORM_SCHEMA, { schema, uiSchema });\n    }\n    setCardValue(field, value) {\n        this._sendMessage(BRIDGE_SET_CARD_CONTENT, { field, value });\n    }\n    injectCss(css) {\n        this._sendMessage(BRIDGE_INJECT_CSS, { css });\n    }\n    customizeAppearance(themes, translations, assets) {\n        this._sendMessage(BRIDGE_CUSTOMIZE_APPEARANCE, { themes, translations, assets });\n    }\n    loginWithToken(token, refreshToken) {\n        this._sendMessage(BRIDGE_LOGIN_WITH_TOKEN, { token, refreshToken });\n    }\n    configureServer(server) {\n        this._sendMessage(BRIDGE_CONFIG_RETRIEVED, { config: { server } });\n    }\n    updateCss(iframeCss = null) {\n        if (!iframeCss) {\n            return;\n        }\n        if (this.wrapper) {\n            Object.keys(iframeCss).forEach(key => {\n                // @ts-ignore: fix CSS key here\n                this.wrapper.style[key] = iframeCss[key];\n            });\n        }\n        this.iframeCss = iframeCss;\n    }\n    _createIframe(cb) {\n        // Remove iframe before creating it.\n        this.remove();\n        this.wrapper = document.createElement('div');\n        this.wrapper.id = 'iframe-wrapper';\n        this.wrapper.style.position = 'fixed';\n        this.updateCss(this.iframeCss);\n        this.iframe = document.createElement('iframe');\n        this.iframe.width = String(this.width);\n        this.iframe.height = String(this.height);\n        this.iframe.allow = 'camera *; microphone *; autoplay *; display-capture *';\n        this.iframe.style.border = '1px solid #aaa';\n        this.iframe.style.backgroundColor = 'white';\n        this.iframe.style.display = 'none';\n        this.iframe.src = this.url;\n        this.iframe.id = 'wazo-softphone';\n        if (cb) {\n            this.iframe.onload = cb;\n        }\n        this.wrapper.appendChild(this.iframe);\n        document.body.appendChild(this.wrapper);\n    }\n    _getLinks() {\n        return [].slice.call(document.querySelectorAll('a:not([data-wazo-parsed])'), 0)\n            .filter((link) => link.href.indexOf('tel:') === 0 || link.href.indexOf('callto:') === 0);\n    }\n    _onLinkClick(e) {\n        e.preventDefault();\n        const number = e.target.href.split('//')[1];\n        this.makeCall(number);\n    }\n    _onAuthenticated(session) {\n        this.session = session;\n        this.parseLinks();\n    }\n    _onMessage(event) {\n        if (!event.data) {\n            return;\n        }\n        switch (event.data.type) {\n            case SDK_ON_OUTGOING_CALL_MADE:\n                this.onOutgoingCallMade(event.data.callSession);\n                break;\n            case SDK_CALL_ENDED: {\n                const { callSession, content, direction, userExtension } = event.data;\n                this.onCallEnded(callSession, content, direction, userExtension);\n                break;\n            }\n            case SDK_CALL_INCOMING:\n                this.onCallIncoming(event.data.callSession);\n                break;\n            case SDK_AUTHENTICATED:\n                this._onAuthenticated(event.data.session);\n                this.onAuthenticated(event.data.session);\n                break;\n            case BRIDGE_LOGGED_OUT:\n                this.onLoggedOut();\n                break;\n            case BRIDGE_CREATE_OR_UPDATE_CARD: {\n                const { content } = event.data;\n                this.onCardSaved(content);\n                break;\n            }\n            case BRIDGE_SEARCH_OPTIONS: {\n                const { fieldId, query } = event.data;\n                this.onSearchOptions(fieldId, query);\n                break;\n            }\n            case BRIDGE_DISPLAY_LINKED_OPTION:\n                this.onDisplayLinkedOption(event.data.linkedOptionId);\n                break;\n            case BRIDGE_WAZO_CONTACT_SEARCH:\n                this.onWazoContactSearch(event.data.query);\n                break;\n            case BRIDGE_ON_AGENT_LOGGED_IN:\n                this.onAgentLoggedIn();\n                break;\n            case BRIDGE_ON_AGENT_LOGGED_OUT:\n                this.onAgentLoggedOut();\n                break;\n            case BRIDGE_ON_AGENT_PAUSED:\n                this.onAgentPaused();\n                break;\n            case BRIDGE_ON_AGENT_RESUMED:\n                this.onAgentResumed();\n                break;\n            case BRIDGE_ON_LANGUAGE_CHANGED:\n                this.onLanguageChanged(event.data.language);\n                break;\n            case BRIDGE_ON_CALL_HELD:\n                this.onCallHeld();\n                break;\n            case BRIDGE_ON_CALL_RESUMED:\n                this.onCallResumed();\n                break;\n            case BRIDGE_ON_CALL_MUTED:\n                this.onCallMuted();\n                break;\n            case BRIDGE_ON_CALL_UN_MUTED:\n                this.onCallUnMuted();\n                break;\n            case BRIDGE_ON_DTMF:\n                this.onDtmfSent(event.data.tone);\n                break;\n            case BRIDGE_ON_DIRECT_TRANSFER:\n                this.onDirectTransfer(event.data.number);\n                break;\n            case BRIDGE_ON_CREATE_INDIRECT_TRANSFER:\n                this.onCreateIndirectTransfer(event.data.number);\n                break;\n            case BRIDGE_ON_CANCEL_INDIRECT_TRANSFER:\n                this.onCancelIndirectTransfer();\n                break;\n            case BRIDGE_ON_CONFIRM_INDIRECT_TRANSFER:\n                this.onConfirmIndirectTransfer();\n                break;\n            case BRIDGE_ON_INDIRECT_TRANSFER_CALL_MADE:\n                this.onIndirectCallMade(event.data.call);\n                break;\n            case BRIDGE_ON_INDIRECT_TRANSFER_DONE:\n                this.onIndirectTransferDone(event.data.call);\n                break;\n            case BRIDGE_ON_START_RECORDING:\n                this.onStartRecording();\n                break;\n            case BRIDGE_ON_STOP_RECORDING:\n                this.onStopRecording();\n                break;\n            case BRIDGE_ON_CARD_CANCELED:\n                this.onCardCanceled();\n                break;\n            case BRIDGE_ON_CALL_LOCALLY_ACCEPTED:\n                this.onCallLocallyAnswered(event.data.call);\n                break;\n            case BRIDGE_ON_CALL_REJECTED:\n                this.onCallRejected(event.data.call);\n                break;\n            case BRIDGE_ON_CALL_ESTABLISHED:\n                this.onCallEstablished(event.data.call);\n                break;\n            case BRIDGE_CALL_LOG_CREATED:\n                this.onCallLogCreated(event.data.callLog);\n                break;\n            case BRIDGE_ON_WEBSOCKET_MESSAGE:\n                this.onWebsocketMessage(event.data.message);\n                break;\n            default:\n                this.onUnHandledEvent(event);\n                break;\n        }\n    }\n    _sendMessage(type, payload = {}) {\n        if (!this.iframe || !this.iframeLoaded) {\n            this._pendingMessages.push([type, payload]);\n            return;\n        }\n        if (this.iframe && this.iframe.contentWindow) {\n            this.iframe.contentWindow.postMessage({ type, ...payload }, '*');\n        }\n    }\n}\nexport default new Softphone();\n","const isString = obj => typeof obj === 'string';\nconst defer = () => {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n};\nconst makeString = object => {\n  if (object == null) return '';\n  return '' + object;\n};\nconst copy = (a, s, t) => {\n  a.forEach(m => {\n    if (s[m]) t[m] = s[m];\n  });\n};\nconst lastOfPathSeparatorRegExp = /###/g;\nconst cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;\nconst canNotTraverseDeeper = object => !object || isString(object);\nconst getLastOfPath = (object, path, Empty) => {\n  const stack = !isString(path) ? path : path.split('.');\n  let stackIndex = 0;\n  while (stackIndex < stack.length - 1) {\n    if (canNotTraverseDeeper(object)) return {};\n    const key = cleanKey(stack[stackIndex]);\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n    ++stackIndex;\n  }\n  if (canNotTraverseDeeper(object)) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack[stackIndex])\n  };\n};\nconst setPath = (object, path, newValue) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  if (obj !== undefined || path.length === 1) {\n    obj[k] = newValue;\n    return;\n  }\n  let e = path[path.length - 1];\n  let p = path.slice(0, path.length - 1);\n  let last = getLastOfPath(object, p, Object);\n  while (last.obj === undefined && p.length) {\n    e = `${p[p.length - 1]}.${e}`;\n    p = p.slice(0, p.length - 1);\n    last = getLastOfPath(object, p, Object);\n    if (last?.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {\n      last.obj = undefined;\n    }\n  }\n  last.obj[`${last.k}.${e}`] = newValue;\n};\nconst pushPath = (object, path, newValue, concat) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = obj[k] || [];\n  obj[k].push(newValue);\n};\nconst getPath = (object, path) => {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path);\n  if (!obj) return undefined;\n  if (!Object.prototype.hasOwnProperty.call(obj, k)) return undefined;\n  return obj[k];\n};\nconst getPathWithDefaults = (data, defaultData, key) => {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n};\nconst deepExtend = (target, source, overwrite) => {\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n};\nconst regexEscape = str => str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nconst escape = data => {\n  if (isString(data)) {\n    return data.replace(/[&<>\"'\\/]/g, s => _entityMap[s]);\n  }\n  return data;\n};\nclass RegExpCache {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.regExpMap = new Map();\n    this.regExpQueue = [];\n  }\n  getRegExp(pattern) {\n    const regExpFromCache = this.regExpMap.get(pattern);\n    if (regExpFromCache !== undefined) {\n      return regExpFromCache;\n    }\n    const regExpNew = new RegExp(pattern);\n    if (this.regExpQueue.length === this.capacity) {\n      this.regExpMap.delete(this.regExpQueue.shift());\n    }\n    this.regExpMap.set(pattern, regExpNew);\n    this.regExpQueue.push(pattern);\n    return regExpNew;\n  }\n}\nconst chars = [' ', ',', '?', '!', ';'];\nconst looksLikeObjectPathRegExpCache = new RegExpCache(20);\nconst looksLikeObjectPath = (key, nsSeparator, keySeparator) => {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);\n  if (possibleChars.length === 0) return true;\n  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\\\?' : c).join('|')})`);\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n};\nconst deepFind = function (obj, path) {\n  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) {\n    if (!Object.prototype.hasOwnProperty.call(obj, path)) return undefined;\n    return obj[path];\n  }\n  const tokens = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < tokens.length;) {\n    if (!current || typeof current !== 'object') {\n      return undefined;\n    }\n    let next;\n    let nextPath = '';\n    for (let j = i; j < tokens.length; ++j) {\n      if (j !== i) {\n        nextPath += keySeparator;\n      }\n      nextPath += tokens[j];\n      next = current[nextPath];\n      if (next !== undefined) {\n        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {\n          continue;\n        }\n        i += j - i + 1;\n        break;\n      }\n    }\n    current = next;\n  }\n  return current;\n};\nconst getCleanedCode = code => code?.replace('_', '-');\n\nconst consoleLogger = {\n  type: 'logger',\n  log(args) {\n    this.output('log', args);\n  },\n  warn(args) {\n    this.output('warn', args);\n  },\n  error(args) {\n    this.output('error', args);\n  },\n  output(type, args) {\n    console?.[type]?.apply?.(console, args);\n  }\n};\nclass Logger {\n  constructor(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.init(concreteLogger, options);\n  }\n  init(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n  log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.forward(args, 'log', '', true);\n  }\n  warn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.forward(args, 'warn', '', true);\n  }\n  error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.forward(args, 'error', '');\n  }\n  deprecate() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{\n        prefix: `${this.prefix}:${moduleName}:`\n      },\n      ...this.options\n    });\n  }\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\nvar baseLogger = new Logger();\n\nclass EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n  on(events, listener) {\n    events.split(' ').forEach(event => {\n      if (!this.observers[event]) this.observers[event] = new Map();\n      const numListeners = this.observers[event].get(listener) || 0;\n      this.observers[event].set(listener, numListeners + 1);\n    });\n    return this;\n  }\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n    this.observers[event].delete(listener);\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.observers[event]) {\n      const cloned = Array.from(this.observers[event].entries());\n      cloned.forEach(_ref => {\n        let [observer, numTimesAdded] = _ref;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer(...args);\n        }\n      });\n    }\n    if (this.observers['*']) {\n      const cloned = Array.from(this.observers['*'].entries());\n      cloned.forEach(_ref2 => {\n        let [observer, numTimesAdded] = _ref2;\n        for (let i = 0; i < numTimesAdded; i++) {\n          observer.apply(observer, [event, ...args]);\n        }\n      });\n    }\n  }\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    super();\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n  getResource(lng, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n    let path;\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    } else {\n      path = [lng, ns];\n      if (key) {\n        if (Array.isArray(key)) {\n          path.push(...key);\n        } else if (isString(key) && keySeparator) {\n          path.push(...key.split(keySeparator));\n        } else {\n          path.push(key);\n        }\n      }\n    }\n    const result = getPath(this.data, path);\n    if (!result && !ns && !key && lng.indexOf('.') > -1) {\n      lng = path[0];\n      ns = path[1];\n      key = path.slice(2).join('.');\n    }\n    if (result || !ignoreJSONStructure || !isString(key)) return result;\n    return deepFind(this.data?.[lng]?.[ns], key, keySeparator);\n  }\n  addResource(lng, ns, key, value) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      silent: false\n    };\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    setPath(this.data, path, value);\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n  addResources(lng, ns, resources) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      silent: false\n    };\n    for (const m in resources) {\n      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {\n        silent: true\n      });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  addResourceBundle(lng, ns, resources, deep, overwrite) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      silent: false,\n      skipCopy: false\n    };\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    let pack = getPath(this.data, path) || {};\n    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = {\n        ...pack,\n        ...resources\n      };\n    }\n    setPath(this.data, path, pack);\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n    this.emit('removed', lng, ns);\n  }\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    return this.getResource(lng, ns);\n  }\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = data && Object.keys(data) || [];\n    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);\n  }\n  toJSON() {\n    return this.data;\n  }\n}\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle(processors, value, key, options, translator) {\n    processors.forEach(processor => {\n      value = this.processors[processor]?.process(value, key, options, translator) ?? value;\n    });\n    return value;\n  }\n};\n\nconst checkedLoadedFor = {};\nconst shouldHandleAsObject = res => !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';\nclass Translator extends EventEmitter {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    this.logger = baseLogger.create('translator');\n  }\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n  exists(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    if (key == null) {\n      return false;\n    }\n    const resolved = this.resolve(key, options);\n    return resolved?.res !== undefined;\n  }\n  extractFromKey(key, options) {\n    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let namespaces = options.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces: isString(namespaces) ? [namespaces] : namespaces\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    return {\n      key,\n      namespaces: isString(namespaces) ? [namespaces] : namespaces\n    };\n  }\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof options === 'object') options = {\n      ...options\n    };\n    if (!options) options = {};\n    if (keys == null) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const {\n      key,\n      namespaces\n    } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng?.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace,\n            usedParams: this.getUsedParamsDetails(options)\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace,\n          usedParams: this.getUsedParamsDetails(options)\n        };\n      }\n      return key;\n    }\n    const resolved = this.resolve(keys, options);\n    let res = resolved?.res;\n    const resUsedKey = resolved?.usedKey || key;\n    const resExactUsedKey = resolved?.exactUsedKey || key;\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const needsPluralHandling = options.count !== undefined && !isString(options.count);\n    const hasDefaultValue = Translator.hasDefaultValue(options);\n    const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n    const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {\n      ordinal: false\n    }) : '';\n    const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0;\n    const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;\n    let resForObjHndl = res;\n    if (handleAsObjectInI18nFormat && !res && hasDefaultValue) {\n      resForObjHndl = defaultValue;\n    }\n    const handleAsObject = shouldHandleAsObject(resForObjHndl);\n    const resType = Object.prototype.toString.apply(resForObjHndl);\n    if (handleAsObjectInI18nFormat && resForObjHndl && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(resForObjHndl))) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, resForObjHndl, {\n          ...options,\n          ns: namespaces\n        }) : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          resolved.usedParams = this.getUsedParamsDetails(options);\n          return resolved;\n        }\n        return r;\n      }\n      if (keySeparator) {\n        const resTypeIsArray = Array.isArray(resForObjHndl);\n        const copy = resTypeIsArray ? [] : {};\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in resForObjHndl) {\n          if (Object.prototype.hasOwnProperty.call(resForObjHndl, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            if (hasDefaultValue && !res) {\n              copy[m] = this.translate(deepKey, {\n                ...options,\n                defaultValue: shouldHandleAsObject(defaultValue) ? defaultValue[m] : undefined,\n                ...{\n                  joinArrays: false,\n                  ns: namespaces\n                }\n              });\n            } else {\n              copy[m] = this.translate(deepKey, {\n                ...options,\n                ...{\n                  joinArrays: false,\n                  ns: namespaces\n                }\n              });\n            }\n            if (copy[m] === deepKey) copy[m] = resForObjHndl[m];\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      let usedDefault = false;\n      let usedKey = false;\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n        if (keySeparator) {\n          const fk = this.resolve(key, {\n            ...options,\n            keySeparator: false\n          });\n          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n        }\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n          } else if (this.backendConnector?.saveMissing) {\n            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach(language => {\n              const suffixes = this.pluralResolver.getSuffixes(language, options);\n              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {\n                suffixes.push(`${this.options.pluralSeparator}zero`);\n              }\n              suffixes.forEach(suffix => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);\n      }\n    }\n    if (returnDetails) {\n      resolved.res = res;\n      resolved.usedParams = this.getUsedParamsDetails(options);\n      return resolved;\n    }\n    return res;\n  }\n  extendTranslation(res, key, options, resolved, lastKey) {\n    var _this = this;\n    if (this.i18nFormat?.parse) {\n      res = this.i18nFormat.parse(res, {\n        ...this.options.interpolation.defaultVariables,\n        ...options\n      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n        resolved\n      });\n    } else if (!options.skipInterpolation) {\n      if (options.interpolation) this.interpolator.init({\n        ...options,\n        ...{\n          interpolation: {\n            ...this.options.interpolation,\n            ...options.interpolation\n          }\n        }\n      });\n      const skipOnVariables = isString(res) && (options?.interpolation?.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        nestBef = nb && nb.length;\n      }\n      let data = options.replace && !isString(options.replace) ? options.replace : options;\n      if (this.options.interpolation.defaultVariables) data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (!options.lng && resolved && resolved.res) options.lng = this.language || resolved.usedLng;\n      if (options.nest !== false) res = this.interpolator.nest(res, function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (lastKey?.[0] === args[0] && !options.context) {\n          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);\n          return null;\n        }\n        return _this.translate(...args, key);\n      }, options);\n      if (options.interpolation) this.interpolator.reset();\n    }\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;\n    if (res != null && postProcessorNames?.length && options.applyPostProcessor !== false) {\n      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {\n        i18nResolved: {\n          ...resolved,\n          usedParams: this.getUsedParamsDetails(options)\n        },\n        ...options\n      } : options, this);\n    }\n    return res;\n  }\n  resolve(keys) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let found;\n    let usedKey;\n    let exactUsedKey;\n    let usedLng;\n    let usedNS;\n    if (isString(keys)) keys = [keys];\n    keys.forEach(k => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n      const needsPluralHandling = options.count !== undefined && !isString(options.count);\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0;\n      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';\n      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n      namespaces.forEach(ns => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils?.hasLoadedNamespace && !this.utils?.hasLoadedNamespace(usedNS)) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(`key \"${usedKey}\" for languages \"${codes.join(', ')}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        }\n        codes.forEach(code => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n          const finalKeys = [key];\n          if (this.i18nFormat?.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            if (needsPluralHandling) {\n              finalKeys.push(key + pluralSuffix);\n              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n              }\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;\n              finalKeys.push(contextKey);\n              if (needsPluralHandling) {\n                finalKeys.push(contextKey + pluralSuffix);\n                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n                }\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n          let possibleKey;\n          while (possibleKey = finalKeys.pop()) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n    return {\n      res: found,\n      usedKey,\n      exactUsedKey,\n      usedLng,\n      usedNS\n    };\n  }\n  isValidLookup(res) {\n    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n  }\n  getResource(code, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (this.i18nFormat?.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n  getUsedParamsDetails() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];\n    const useOptionsReplaceForData = options.replace && !isString(options.replace);\n    let data = useOptionsReplaceForData ? options.replace : options;\n    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {\n      data.count = options.count;\n    }\n    if (this.options.interpolation.defaultVariables) {\n      data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n    }\n    if (!useOptionsReplaceForData) {\n      data = {\n        ...data\n      };\n      for (const key of optionsKeys) {\n        delete data[key];\n      }\n    }\n    return data;\n  }\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n    for (const option in options) {\n      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n  formatLanguageCode(code) {\n    if (isString(code) && code.indexOf('-') > -1) {\n      let formattedCode;\n      try {\n        formattedCode = Intl.getCanonicalLocales(code)[0];\n      } catch (e) {}\n      if (formattedCode && this.options.lowerCaseLng) {\n        formattedCode = formattedCode.toLowerCase();\n      }\n      if (formattedCode) return formattedCode;\n      if (this.options.lowerCaseLng) {\n        return code.toLowerCase();\n      }\n      return code;\n    }\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n  }\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n    let found;\n    codes.forEach(code => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n    if (!found && this.options.supportedLngs) {\n      codes.forEach(code => {\n        if (found) return;\n        const lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return found = lngOnly;\n        found = this.options.supportedLngs.find(supportedLng => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;\n          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;\n        });\n      });\n    }\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n    return found;\n  }\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (isString(fallbacks)) fallbacks = [fallbacks];\n    if (Array.isArray(fallbacks)) return fallbacks;\n    if (!code) return fallbacks.default || [];\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n    return found || [];\n  }\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n    const codes = [];\n    const addCode = c => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (isString(code)) {\n      addCode(this.formatLanguageCode(code));\n    }\n    fallbackCodes.forEach(fc => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n    return codes;\n  }\n}\n\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nconst dummyRule = {\n  select: count => count === 1 ? 'one' : 'other',\n  resolvedOptions: () => ({\n    pluralCategories: ['one', 'other']\n  })\n};\nclass PluralResolver {\n  constructor(languageUtils) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    this.pluralRulesCache = {};\n  }\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n  clearCache() {\n    this.pluralRulesCache = {};\n  }\n  getRule(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);\n    const type = options.ordinal ? 'ordinal' : 'cardinal';\n    const cacheKey = JSON.stringify({\n      cleanedCode,\n      type\n    });\n    if (cacheKey in this.pluralRulesCache) {\n      return this.pluralRulesCache[cacheKey];\n    }\n    let rule;\n    try {\n      rule = new Intl.PluralRules(cleanedCode, {\n        type\n      });\n    } catch (err) {\n      if (!Intl) {\n        this.logger.error('No Intl support, please use an Intl polyfill!');\n        return dummyRule;\n      }\n      if (!code.match(/-|_/)) return dummyRule;\n      const lngPart = this.languageUtils.getLanguagePartFromCode(code);\n      rule = this.getRule(lngPart, options);\n    }\n    this.pluralRulesCache[cacheKey] = rule;\n    return rule;\n  }\n  needsPlural(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let rule = this.getRule(code, options);\n    if (!rule) rule = this.getRule('dev', options);\n    return rule?.resolvedOptions().pluralCategories.length > 1;\n  }\n  getPluralFormsOfKey(code, key) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);\n  }\n  getSuffixes(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let rule = this.getRule(code, options);\n    if (!rule) rule = this.getRule('dev', options);\n    if (!rule) return [];\n    return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n  }\n  getSuffix(code, count) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const rule = this.getRule(code, options);\n    if (rule) {\n      return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n    }\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return this.getSuffix('dev', count, options);\n  }\n}\n\nconst deepFindWithDefaults = function (data, defaultData, key) {\n  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && isString(key)) {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n};\nconst regexSafe = val => val.replace(/\\$/g, '$$$$');\nclass Interpolator {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options?.interpolation?.format || (value => value);\n    this.init(options);\n  }\n  init() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!options.interpolation) options.interpolation = {\n      escapeValue: true\n    };\n    const {\n      escape: escape$1,\n      escapeValue,\n      useRawValueToEscape,\n      prefix,\n      prefixEscaped,\n      suffix,\n      suffixEscaped,\n      formatSeparator,\n      unescapeSuffix,\n      unescapePrefix,\n      nestingPrefix,\n      nestingPrefixEscaped,\n      nestingSuffix,\n      nestingSuffixEscaped,\n      nestingOptionsSeparator,\n      maxReplaces,\n      alwaysFormat\n    } = options.interpolation;\n    this.escape = escape$1 !== undefined ? escape$1 : escape;\n    this.escapeValue = escapeValue !== undefined ? escapeValue : true;\n    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;\n    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';\n    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';\n    this.formatSeparator = formatSeparator || ',';\n    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';\n    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');\n    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';\n    this.maxReplaces = maxReplaces || 1000;\n    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;\n    this.resetRegExp();\n  }\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n  resetRegExp() {\n    const getOrResetRegExp = (existingRegExp, pattern) => {\n      if (existingRegExp?.source === pattern) {\n        existingRegExp.lastIndex = 0;\n        return existingRegExp;\n      }\n      return new RegExp(pattern, 'g');\n    };\n    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);\n    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);\n    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);\n  }\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n    const handleFormat = key => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);\n        return this.alwaysFormat ? this.format(path, undefined, lng, {\n          ...options,\n          ...data,\n          interpolationkey: key\n        }) : path;\n      }\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k\n      });\n    };\n    this.resetRegExp();\n    const missingInterpolationHandler = options?.missingInterpolationHandler || this.options.missingInterpolationHandler;\n    const skipOnVariables = options?.interpolation?.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n    const todos = [{\n      regex: this.regexpUnescape,\n      safeValue: val => regexSafe(val)\n    }, {\n      regex: this.regexp,\n      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)\n    }];\n    todos.forEach(todo => {\n      replaces = 0;\n      while (match = todo.regex.exec(str)) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = isString(temp) ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue;\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (!isString(value) && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n  nest(str, fc) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let match;\n    let value;\n    let clonedOptions;\n    const handleHasOptions = (key, inheritedOptions) => {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if ((matchedSingleQuotes?.length ?? 0) % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n      try {\n        clonedOptions = JSON.parse(optionsString);\n        if (inheritedOptions) clonedOptions = {\n          ...inheritedOptions,\n          ...clonedOptions\n        };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;\n      return key;\n    };\n    while (match = this.nestingRegexp.exec(str)) {\n      let formatters = [];\n      clonedOptions = {\n        ...options\n      };\n      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n      if (value && match[0] === str && !isString(value)) return value;\n      if (!isString(value)) value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n      if (doReduce) {\n        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {\n          ...options,\n          interpolationkey: match[1].trim()\n        }), value.trim());\n      }\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nconst parseFormatStr = formatStr => {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    const optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n      opts.forEach(opt => {\n        if (opt) {\n          const [key, ...rest] = opt.split(':');\n          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n          const trimmedKey = key.trim();\n          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;\n          if (val === 'false') formatOptions[trimmedKey] = false;\n          if (val === 'true') formatOptions[trimmedKey] = true;\n          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);\n        }\n      });\n    }\n  }\n  return {\n    formatName,\n    formatOptions\n  };\n};\nconst createCachedFormatter = fn => {\n  const cache = {};\n  return (val, lng, options) => {\n    let optForCache = options;\n    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {\n      optForCache = {\n        ...optForCache,\n        [options.interpolationkey]: undefined\n      };\n    }\n    const key = lng + JSON.stringify(optForCache);\n    let formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(getCleanedCode(lng), options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n};\nclass Formatter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      currency: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt,\n          style: 'currency'\n        });\n        return val => formatter.format(val);\n      }),\n      datetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      relativetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val, opt.range || 'day');\n      }),\n      list: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      })\n    };\n    this.init(options);\n  }\n  init(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    this.formatSeparator = options.interpolation.formatSeparator || ',';\n  }\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n  format(value, format, lng) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const formats = format.split(this.formatSeparator);\n    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {\n      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);\n      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);\n    }\n    const result = formats.reduce((mem, f) => {\n      const {\n        formatName,\n        formatOptions\n      } = parseFormatStr(f);\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          const valOptions = options?.formatParams?.[options.interpolationkey] || {};\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n    return result;\n  }\n}\n\nconst removePending = (q, name) => {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n};\nclass Connector extends EventEmitter {\n  constructor(backend, store, services) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super();\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    this.state = {};\n    this.queue = [];\n    this.backend?.init?.(services, options.backend, options);\n  }\n  queueLoad(languages, namespaces, options, callback) {\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n    languages.forEach(lng => {\n      let hasAllNamespaces = true;\n      namespaces.forEach(ns => {\n        const name = `${lng}|${ns}`;\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2;\n        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1;\n          hasAllNamespaces = false;\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback\n      });\n    }\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces)\n    };\n  }\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    if (err) this.emit('failedLoading', lng, ns, err);\n    if (!err && data) {\n      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {\n        skipCopy: true\n      });\n    }\n    this.state[name] = err ? -1 : 2;\n    if (err && data) this.state[name] = 0;\n    const loaded = {};\n    this.queue.forEach(q => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n      if (err) q.errors.push(err);\n      if (q.pendingCount === 0 && !q.done) {\n        Object.keys(q.loaded).forEach(l => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach(n => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n    this.emit('loaded', loaded);\n    this.queue = this.queue.filter(q => !q.done);\n  }\n  read(lng, ns, fcName) {\n    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n    let callback = arguments.length > 5 ? arguments[5] : undefined;\n    if (!lng.length) return callback(null, {});\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({\n        lng,\n        ns,\n        fcName,\n        tried,\n        wait,\n        callback\n      });\n      return;\n    }\n    this.readingCalls++;\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          r.then(data => resolver(null, data)).catch(resolver);\n        } else {\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n    return fc(lng, ns, resolver);\n  }\n  prepareLoading(languages, namespaces) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let callback = arguments.length > 3 ? arguments[3] : undefined;\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);\n    if (isString(namespaces)) namespaces = [namespaces];\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback();\n      return null;\n    }\n    toLoad.toLoad.forEach(name => {\n      this.loadOne(name);\n    });\n  }\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {\n      reload: true\n    }, callback);\n  }\n  loadOne(name) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n      this.loaded(name, err, data);\n    });\n  }\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};\n    if (this.services?.utils?.hasLoadedNamespace && !this.services?.utils?.hasLoadedNamespace(namespace)) {\n      this.logger.warn(`did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n      return;\n    }\n    if (key === undefined || key === null || key === '') return;\n    if (this.backend?.create) {\n      const opts = {\n        ...options,\n        isUpdate\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        try {\n          let r;\n          if (fc.length === 5) {\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            r.then(data => clb(null, data)).catch(clb);\n          } else {\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        fc(languages, namespace, key, fallbackValue, clb, opts);\n      }\n    }\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nconst get = () => ({\n  debug: false,\n  initAsync: true,\n  ns: ['translation'],\n  defaultNS: ['translation'],\n  fallbackLng: ['dev'],\n  fallbackNS: false,\n  supportedLngs: false,\n  nonExplicitSupportedLngs: false,\n  load: 'all',\n  preload: false,\n  simplifyPluralSuffix: true,\n  keySeparator: '.',\n  nsSeparator: ':',\n  pluralSeparator: '_',\n  contextSeparator: '_',\n  partialBundledLanguages: false,\n  saveMissing: false,\n  updateMissing: false,\n  saveMissingTo: 'fallback',\n  saveMissingPlurals: true,\n  missingKeyHandler: false,\n  missingInterpolationHandler: false,\n  postProcess: false,\n  postProcessPassResolved: false,\n  returnNull: false,\n  returnEmptyString: true,\n  returnObjects: false,\n  joinArrays: false,\n  returnedObjectHandler: false,\n  parseMissingKeyHandler: false,\n  appendNamespaceToMissingKey: false,\n  appendNamespaceToCIMode: false,\n  overloadTranslationOptionHandler: args => {\n    let ret = {};\n    if (typeof args[1] === 'object') ret = args[1];\n    if (isString(args[1])) ret.defaultValue = args[1];\n    if (isString(args[2])) ret.tDescription = args[2];\n    if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n      const options = args[3] || args[2];\n      Object.keys(options).forEach(key => {\n        ret[key] = options[key];\n      });\n    }\n    return ret;\n  },\n  interpolation: {\n    escapeValue: true,\n    format: value => value,\n    prefix: '{{',\n    suffix: '}}',\n    formatSeparator: ',',\n    unescapePrefix: '-',\n    nestingPrefix: '$t(',\n    nestingSuffix: ')',\n    nestingOptionsSeparator: ',',\n    maxReplaces: 1000,\n    skipOnVariables: true\n  }\n});\nconst transformOptions = options => {\n  if (isString(options.ns)) options.ns = [options.ns];\n  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];\n  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs?.indexOf?.('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  if (typeof options.initImmediate === 'boolean') options.initAsync = options.initImmediate;\n  return options;\n};\n\nconst noop = () => {};\nconst bindMemberFunctions = inst => {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(mem => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n};\nclass I18n extends EventEmitter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = {\n      external: []\n    };\n    bindMemberFunctions(this);\n    if (callback && !this.isInitialized && !options.isClone) {\n      if (!this.options.initAsync) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n  init() {\n    var _this = this;\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    this.isInitializing = true;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (options.defaultNS == null && options.ns) {\n      if (isString(options.ns)) {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n    const defOpts = get();\n    this.options = {\n      ...defOpts,\n      ...this.options,\n      ...transformOptions(options)\n    };\n    this.options.interpolation = {\n      ...defOpts.interpolation,\n      ...this.options.interpolation\n    };\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n    const createClassOnDemand = ClassOrObject => {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    };\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else {\n        formatter = Formatter;\n      }\n      const lu = new LanguageUtil(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        _this.emit(event, ...args);\n      });\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n      this.translator = new Translator(this.services, this.options);\n      this.translator.on('*', function (event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _this.emit(event, ...args);\n      });\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n    storeApi.forEach(fcName => {\n      this[fcName] = function () {\n        return _this.store[fcName](...arguments);\n      };\n    });\n    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = function () {\n        _this.store[fcName](...arguments);\n        return _this;\n      };\n    });\n    const deferred = defer();\n    const load = () => {\n      const finish = (err, t) => {\n        this.isInitializing = false;\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n        deferred.resolve(t);\n        callback(err, t);\n      };\n      if (this.languages && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n    if (this.options.resources || !this.options.initAsync) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n    return deferred;\n  }\n  loadResources(language) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    let usedCallback = callback;\n    const usedLng = isString(language) ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng?.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();\n      const toLoad = [];\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      if (!usedLng) {\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n      this.options.preload?.forEach?.(l => append(l));\n      this.services.backendConnector.load(toLoad, this.options.ns, e => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'function') {\n      callback = lngs;\n      lngs = undefined;\n    }\n    if (typeof ns === 'function') {\n      callback = ns;\n      ns = undefined;\n    }\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve();\n      callback(err);\n    });\n    return deferred;\n  }\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n    return this;\n  }\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n  }\n  changeLanguage(lng, callback) {\n    var _this2 = this;\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n    const setLngProps = l => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n      deferred.resolve(function () {\n        return _this2.t(...arguments);\n      });\n      if (callback) callback(err, function () {\n        return _this2.t(...arguments);\n      });\n    };\n    const setLng = lngs => {\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n        this.services.languageDetector?.cacheUserLanguage?.(l);\n      }\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n    return deferred;\n  }\n  getFixedT(lng, ns, keyPrefix) {\n    var _this3 = this;\n    const fixedT = function (key, opts) {\n      let options;\n      if (typeof opts !== 'object') {\n        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n          rest[_key3 - 2] = arguments[_key3];\n        }\n        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = {\n          ...opts\n        };\n      }\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n      const keySeparator = _this3.options.keySeparator || '.';\n      let resultKey;\n      if (options.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);\n      } else {\n        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return _this3.t(resultKey, options);\n    };\n    if (isString(lng)) {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n  t() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.translator?.translate(...args);\n  }\n  exists() {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n    return this.translator?.exists(...args);\n  }\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n  hasLoadedNamespace(ns) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n    if (lng.toLowerCase() === 'cimode') return true;\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 0 || loadState === 2;\n    };\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n    if (this.hasResourceBundle(lng, ns)) return true;\n    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n    return false;\n  }\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (isString(ns)) ns = [ns];\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n    if (isString(lngs)) lngs = [lngs];\n    const preloaded = this.options.preload || [];\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages?.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n    const languageUtils = this.services?.languageUtils || new LanguageUtil(get());\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n  }\n  static createInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    return new I18n(options, callback);\n  }\n  cloneInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = {\n      ...this.options,\n      ...options,\n      ...{\n        isClone: true\n      }\n    };\n    const clone = new I18n(mergedOptions);\n    if (options.debug !== undefined || options.prefix !== undefined) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = {\n      ...this.services\n    };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      const clonedData = Object.keys(this.store.data).reduce((prev, l) => {\n        prev[l] = {\n          ...this.store.data[l]\n        };\n        return Object.keys(prev[l]).reduce((acc, n) => {\n          acc[n] = {\n            ...prev[l][n]\n          };\n          return acc;\n        }, {});\n      }, {});\n      clone.store = new ResourceStore(clonedData, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', function (event) {\n      for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n        args[_key6 - 1] = arguments[_key6];\n      }\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions;\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    return clone;\n  }\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\nconst instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nconst createInstance = instance.createInstance;\nconst dir = instance.dir;\nconst init = instance.init;\nconst loadResources = instance.loadResources;\nconst reloadResources = instance.reloadResources;\nconst use = instance.use;\nconst changeLanguage = instance.changeLanguage;\nconst getFixedT = instance.getFixedT;\nconst t = instance.t;\nconst exists = instance.exists;\nconst setDefaultNamespace = instance.setDefaultNamespace;\nconst hasLoadedNamespace = instance.hasLoadedNamespace;\nconst loadNamespaces = instance.loadNamespaces;\nconst loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import { App } from '@wazo/euc-plugins-sdk';\nimport i18next from \"i18next\";\n\nconst MAX_FILE_SIZE = 2 * 1024 * 1024; // 2MB\n\nlet audio = null;\nlet currentPlayingButton = null;\nlet url;\n\nconst app = new App();\n\n// Elements for internal calls\nconst ringInternalElem = document.getElementById(\"ring-internal\");\nconst playButtonInternal = document.getElementById(\"playButton-internal\");\nconst browseButtonInternal = document.getElementById(\"browseButton-internal\");\nconst fileInputInternal = document.getElementById(\"fileInput-internal\");\nconst customNameInternal = document.getElementById(\"customName-internal\");\n\n// Elements for external calls\nconst ringExternalElem = document.getElementById(\"ring-external\");\nconst playButtonExternal = document.getElementById(\"playButton-external\");\nconst browseButtonExternal = document.getElementById(\"browseButton-external\");\nconst fileInputExternal = document.getElementById(\"fileInput-external\");\nconst customNameExternal = document.getElementById(\"customName-external\");\n\n// Storage keys for custom files\nconst CUSTOM_FILE_INTERNAL = \"customFileInternal\";\nconst CUSTOM_FILE_EXTERNAL = \"customFileExternal\";\nconst CUSTOM_NAME_INTERNAL = \"customNameInternal\";\nconst CUSTOM_NAME_EXTERNAL = \"customNameExternal\";\n\nconst options = {\n  \"original\": \"Reset to original\",\n  \"custom\": \"-- Personnalis\\u00e9 --\",\n  \"iphone.mp3\": \"Iphone\",\n  \"iphone6.mp3\": \"Iphone 6\",\n  \"landline1.wav\": \"Landline 1\",\n  \"landline2.wav\": \"Landline 2\",\n  \"marimba.wav\": \"Marimba 1\",\n  \"marimba.mp3\": \"Marimba 2\",\n  \"ring3.wav\": \"Ring 3\",\n  \"ring4.wav\": \"Ring 4\",\n  \"ring5.wav\": \"Ring 5\",\n  \"bird2.mp3\": \"Bird\",\n  \"sf-oiseau-24.mp3\": \"Bird 1\",\n  \"oiseau2.mp3\": \"Bird 2\",\n  \"sf_oiseau_seul_01.mp3\": \"Bird 3\",\n  \"sf_oiseaux.mp3\": \"Bird 4\",\n  \"sf_canari.mp3\": \"Canary\",\n  \"lg_bubble.mp3\": \"Bubble\",\n  \"huawei.mp3\": \"Huawei\",\n  \"lg_peanut.mp3\": \"Peanut\",\n  \"xylo.mp3\": \"Xylophone\"\n};\n\napp.onIframeMessage = (msg) => {\n  if (msg.value === 'config') {\n    if (msg.ringInternal) {\n      const ring = msg.ringInternal.split(\"/\").pop();\n      if (ring.startsWith('data:')) {\n        ringInternalElem.value = 'custom';\n      } else {\n        ringInternalElem.value = ring;\n      }\n    }\n    if (msg.ringExternal) {\n      const ring = msg.ringExternal.split(\"/\").pop();\n      if (ring.startsWith('data:')) {\n        ringExternalElem.value = 'custom';\n      } else {\n        ringExternalElem.value = ring;\n      }\n    }\n  }\n  updateCustomNames();\n}\n\nconst addOptionMenu = (options, idMenu) => {\n  const menu = document.getElementById(idMenu);\n  for (const option in options) {\n    const newOption = document.createElement(\"option\");\n    newOption.text = options[option];\n    newOption.value = option;\n    menu.add(newOption);\n  }\n}\n\nconst stopAudio = () => {\n  if (audio) {\n    audio.pause();\n    audio.currentTime = 0;\n    audio = null;\n  }\n  if (currentPlayingButton) {\n    currentPlayingButton.classList.remove('playing');\n    currentPlayingButton = null;\n  }\n}\n\nconst getAudioPath = (ringElem, type) => {\n  const ring = ringElem.value;\n  if (ring === 'original') {\n    return null;\n  }\n  if (ring === 'custom') {\n    const customKey = type === 'internal' ? CUSTOM_FILE_INTERNAL : CUSTOM_FILE_EXTERNAL;\n    return localStorage.getItem(customKey);\n  }\n  return `${url}/sounds/${ring}`;\n}\n\nconst togglePlay = (button, ringElem, type) => {\n  const isCurrentlyPlaying = button.classList.contains('playing');\n  stopAudio();\n\n  if (isCurrentlyPlaying) {\n    return;\n  }\n\n  const path = getAudioPath(ringElem, type);\n  if (!path) {\n    return;\n  }\n\n  audio = new Audio(path);\n  audio.loop = false;\n  audio.addEventListener('ended', () => stopAudio());\n\n  audio.play().then(() => {\n    button.classList.add('playing');\n    currentPlayingButton = button;\n  }).catch(e => {\n    console.log('Audio play error:', e);\n  });\n}\n\nconst handleFileSelect = (file, type) => {\n  if (!file) return;\n\n  // Check file size\n  if (file.size > MAX_FILE_SIZE) {\n    alert(i18next.t('file_too_large'));\n    return;\n  }\n\n  // Check file type\n  if (!file.type.startsWith('audio/')) {\n    alert(i18next.t('invalid_format'));\n    return;\n  }\n\n  const reader = new FileReader();\n  reader.onload = (e) => {\n    const base64 = e.target.result;\n    const customFileKey = type === 'internal' ? CUSTOM_FILE_INTERNAL : CUSTOM_FILE_EXTERNAL;\n    const customNameKey = type === 'internal' ? CUSTOM_NAME_INTERNAL : CUSTOM_NAME_EXTERNAL;\n    const ringElem = type === 'internal' ? ringInternalElem : ringExternalElem;\n\n    // Store in localStorage\n    try {\n      localStorage.setItem(customFileKey, base64);\n      localStorage.setItem(customNameKey, file.name);\n\n      // Select \"custom\" option\n      ringElem.value = 'custom';\n\n      // Send to background\n      app.sendMessageToBackground({value: 'ring', type: type, data: 'custom', customData: base64});\n\n      updateCustomNames();\n    } catch (e) {\n      alert(i18next.t('storage_error'));\n      console.error('Storage error:', e);\n    }\n  };\n  reader.readAsDataURL(file);\n}\n\nconst updateCustomNames = () => {\n  const nameInternal = localStorage.getItem(CUSTOM_NAME_INTERNAL);\n  const nameExternal = localStorage.getItem(CUSTOM_NAME_EXTERNAL);\n\n  customNameInternal.textContent = nameInternal && ringInternalElem.value === 'custom' ? nameInternal : '';\n  customNameExternal.textContent = nameExternal && ringExternalElem.value === 'custom' ? nameExternal : '';\n}\n\nconst addEventsListener = () => {\n  // Internal ring events\n  ringInternalElem.addEventListener(\"change\", function() {\n    const ring = ringInternalElem.value;\n    stopAudio();\n    updateCustomNames();\n\n    if (ring === 'custom') {\n      const customData = localStorage.getItem(CUSTOM_FILE_INTERNAL);\n      if (customData) {\n        app.sendMessageToBackground({value: 'ring', type: 'internal', data: 'custom', customData: customData});\n      }\n    } else {\n      app.sendMessageToBackground({value: 'ring', type: 'internal', data: ring});\n    }\n  });\n\n  playButtonInternal.addEventListener(\"click\", () => {\n    togglePlay(playButtonInternal, ringInternalElem, 'internal');\n  });\n\n  browseButtonInternal.addEventListener(\"click\", () => {\n    fileInputInternal.click();\n  });\n\n  fileInputInternal.addEventListener(\"change\", (e) => {\n    handleFileSelect(e.target.files[0], 'internal');\n    e.target.value = ''; // Reset for same file selection\n  });\n\n  // External ring events\n  ringExternalElem.addEventListener(\"change\", function() {\n    const ring = ringExternalElem.value;\n    stopAudio();\n    updateCustomNames();\n\n    if (ring === 'custom') {\n      const customData = localStorage.getItem(CUSTOM_FILE_EXTERNAL);\n      if (customData) {\n        app.sendMessageToBackground({value: 'ring', type: 'external', data: 'custom', customData: customData});\n      }\n    } else {\n      app.sendMessageToBackground({value: 'ring', type: 'external', data: ring});\n    }\n  });\n\n  playButtonExternal.addEventListener(\"click\", () => {\n    togglePlay(playButtonExternal, ringExternalElem, 'external');\n  });\n\n  browseButtonExternal.addEventListener(\"click\", () => {\n    fileInputExternal.click();\n  });\n\n  fileInputExternal.addEventListener(\"change\", (e) => {\n    handleFileSelect(e.target.files[0], 'external');\n    e.target.value = '';\n  });\n}\n\n(async() => {\n  await app.initialize();\n  const context = app.getContext();\n  const lang = context.app.locale;\n  url = (context.app.extra.baseUrl || '').replace(/\\/$/, '');\n\n  addOptionMenu(options, \"ring-internal\");\n  addOptionMenu(options, \"ring-external\");\n  addEventsListener();\n\n  app.sendMessageToBackground({value: 'config'});\n\n  await i18next.init({\n    lng: lang,\n    fallbackLng: 'en',\n    debug: false,\n    resources: {\n      en: {\n        translation: {\n          \"ring_internal\": \"Internal calls\",\n          \"ring_external\": \"External calls\",\n          \"file_too_large\": \"File too large (max 2MB)\",\n          \"invalid_format\": \"Invalid format (audio only)\",\n          \"storage_error\": \"Storage error\"\n        }\n      },\n      fr: {\n        translation: {\n          \"ring_internal\": \"Appels internes\",\n          \"ring_external\": \"Appels externes\",\n          \"file_too_large\": \"Fichier trop volumineux (max 2Mo)\",\n          \"invalid_format\": \"Format invalide (audio uniquement)\",\n          \"storage_error\": \"Erreur de stockage\"\n        }\n      }\n    }\n  });\n\n  document.getElementById('label-internal').innerHTML = i18next.t('ring_internal');\n  document.getElementById('label-external').innerHTML = i18next.t('ring_external');\n\n  updateCustomNames();\n})();\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","a","definition","o","obj","prop","hasOwnProperty","EVENT_APP_INITIALIZE","EVENT_MOBILE_ON_MENU_ACTION","App","constructor","onNewSession","session","onUnLoaded","e","onPluginUnLoaded","onAppUnLoaded","tabId","onIframeMessage","onBackgroundMessage","onLogout","onCallIncoming","onCallMade","onCallAnswered","onCallAccepted","onCallHungUp","onUnHandledEvent","event","onWebsocketMessage","onMeetingCreated","meeting","onRouteChanged","location","action","onUserJoinRoom","room","onUserLeaveRoom","onParticipantJoinRoom","participant","onParticipantLeaveRoom","onConnectedToStack","stackSession","onSwitchTenant","uuid","initialize","async","isInitialized","window","_onMessage","_sendMessage","bg","_isBackground","pluginId","_pluginId","_initializeTimeout","setTimeout","_initializeResolve","_initializeCompleted","getContext","sendMessageToIframe","payload","sendMessageToBackground","startCall","targets","requestedModalities","openLink","url","createMeeting","requireAuthorization","persistent","openMeetingLobby","extension","openSettings","closeLeftPanel","openLeftPanel","playProgressSound","playNewMessageSound","playIncomingCallSound","playDoubleCallSound","playHangupSound","stopCurrentSound","configureSounds","sounds","resetSounds","changeNavBarColor","color","resetNavBarColor","displayNotification","title","text","displayModal","htmlText","height","width","hideCloseButton","removeModal","hasLocalVideoStream","Wazo","Phone","phone","hasALocalVideoTrack","getLocalCurrentVideoStream","getLocalVideoStream","hasRemoveVideoStream","hasRemoteVideo","getRemoteVideoStream","updateBadge","entityId","_entityId","displayBanner","closeBanner","changeToolbarDisplay","display","setMobileHeader","callback","id","_headerBackCallbacks","headerTitle","emitHeaderBack","setMobileContextualMenu","contextualMenu","setMobileShowBottomNav","showBottomNav","onMobileMenuAction","data","_onLoaded","theme","locale","extra","_unloadPlugin","tenant","ReactNativeWebView","postMessage","JSON","stringify","parent","_queuedMessages","_sendQueuedMessages","forEach","clearTimeout","app","host","clientType","baseUrl","_baseUrl","user","_setPluginId","_resetEvents","_configurePlugin","configuration","globalThis","onunload","parse","_","ignoreCall","BRIDGE_CONFIG_RETRIEVED","Softphone","super","iframeCss","left","bottom","displayed","wrapper","iframe","iframeLoaded","_pendingMessages","onLinkEnabled","link","onIFrameLoaded","onCallLocallyAnswered","onCallEstablished","onOutgoingCallMade","onCallRejected","onCallEnded","card","direction","fromExtension","onCardSaved","onCardCanceled","onAuthenticated","onLoggedOut","onSearchOptions","fieldId","query","onOptionsResults","onDisplayLinkedOption","optionId","onWazoContactSearch","onAgentLoggedIn","onAgentLoggedOut","onAgentPaused","onAgentResumed","onLanguageChanged","language","onCallHeld","onCallResumed","onCallMuted","onCallUnMuted","onDtmfSent","tone","onDirectTransfer","number","onCreateIndirectTransfer","onCancelIndirectTransfer","onConfirmIndirectTransfer","onIndirectCallMade","onIndirectTransferDone","onStartRecording","onStopRecording","onCallLogCreated","callLog","server","port","wrapUpDuration","enableAgent","tenantId","domainName","debug","disableAutoLogin","config","_createIframe","parseLinks","_getLinks","setAttribute","_onLinkClick","removeParsedLinksEvent","document","querySelectorAll","removeAttribute","makeCall","show","toggleDisplay","hide","style","remove","optionsFetched","options","setFormSchema","schema","uiSchema","setCardValue","field","injectCss","css","customizeAppearance","themes","translations","assets","loginWithToken","token","refreshToken","configureServer","updateCss","cb","createElement","allow","border","backgroundColor","src","onload","appendChild","body","filter","href","indexOf","preventDefault","split","_onAuthenticated","callSession","content","userExtension","linkedOptionId","contentWindow","isString","defer","res","rej","promise","makeString","object","lastOfPathSeparatorRegExp","cleanKey","replace","canNotTraverseDeeper","getLastOfPath","path","Empty","stack","stackIndex","k","setPath","newValue","p","last","getPath","deepExtend","source","overwrite","regexEscape","str","_entityMap","s","chars","looksLikeObjectPathRegExpCache","capacity","regExpMap","Map","regExpQueue","getRegExp","pattern","regExpFromCache","regExpNew","RegExp","delete","deepFind","keySeparator","tokens","current","next","nextPath","j","getCleanedCode","code","consoleLogger","log","output","Logger","concreteLogger","prefix","logger","_len","_key","forward","_len2","_key2","_len3","_key3","deprecate","_len4","_key4","lvl","debugOnly","moduleName","clone","baseLogger","observers","numListeners","from","entries","_ref","observer","numTimesAdded","_ref2","ResourceStore","ns","defaultNS","ignoreJSONStructure","addNamespaces","removeNamespaces","splice","getResource","lng","isArray","result","join","addResource","silent","addResources","resources","addResourceBundle","deep","skipCopy","pack","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage","hasLanguageSomeTranslations","find","v","toJSON","postProcessor","processors","addPostProcessor","handle","translator","processor","process","checkedLoadedFor","shouldHandleAsObject","Translator","services","t","changeLanguage","exists","interpolation","resolved","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","c","r","map","matched","test","ki","substring","looksLikeObjectPath","match","interpolator","nestingRegexp","parts","translate","lastKey","overloadTranslationOptionHandler","returnDetails","namespace","appendNamespaceToCIMode","toLowerCase","usedKey","exactUsedKey","usedLng","usedNS","usedParams","getUsedParamsDetails","resUsedKey","resExactUsedKey","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValueSuffixOrdinalFallback","ordinal","needsZeroSuffixLookup","defaultValue","pluralSeparator","resForObjHndl","resType","toString","extendTranslation","usedDefault","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","l","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","suffixes","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","_this","defaultVariables","skipInterpolation","skipOnVariables","nestBef","nb","interpolate","na","nest","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsContextHandling","codes","utils","hasLoadedNamespace","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","ordinalPrefix","contextKey","contextSeparator","possibleKey","returnNull","returnEmptyString","resourceStore","optionsKeys","useOptionsReplaceForData","option","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","formattedCode","Intl","getCanonicalLocales","lowerCaseLng","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngOnly","supportedLng","fallbacks","default","fallbackCode","fallbackCodes","addCode","fc","suffixesOrder","zero","one","two","few","many","other","dummyRule","select","resolvedOptions","pluralCategories","PluralResolver","pluralRulesCache","addRule","rules","clearCache","getRule","cleanedCode","cacheKey","rule","PluralRules","lngPart","needsPlural","getPluralFormsOfKey","sort","pluralCategory1","pluralCategory2","pluralCategory","deepFindWithDefaults","defaultData","getPathWithDefaults","regexSafe","val","Interpolator","format","escapeValue","escape","escape$1","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapeSuffix","unescapePrefix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","getOrResetRegExp","existingRegExp","lastIndex","regexp","regexpUnescape","replaces","handleFormat","interpolationkey","trim","f","missingInterpolationHandler","regex","safeValue","todo","exec","matchedVar","temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","reduce","createCachedFormatter","fn","cache","optForCache","formatParams","formatter","Formatter","formats","opt","NumberFormat","currency","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","range","ListFormat","add","addCached","findIndex","mem","formatName","formatOptions","formatStr","optStr","rest","trimmedKey","parseInt","parseFormatStr","formatted","valOptions","Connector","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","queue","queueLoad","languages","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","errors","q","pushPath","removePending","done","loadedKeys","read","fcName","tried","wait","then","catch","prepareLoading","loadOne","fallbackValue","isUpdate","clb","opts","initAsync","preload","simplifyPluralSuffix","partialBundledLanguages","tDescription","transformOptions","initImmediate","noop","I18n","inst","modules","external","isClone","isInitializing","defOpts","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","deferred","finish","initializedStoreOnce","loadResources","usedCallback","append","resolvedLanguage","setResolvedLanguage","reloadResources","use","li","lngInLngs","_this2","isLanguageChangingTo","setLngProps","setLng","cacheUserLanguage","detect","getFixedT","keyPrefix","_this3","fixedT","resultKey","_len5","_key5","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","dir","createInstance","cloneInstance","forkResourceStore","mergedOptions","clonedData","prev","acc","_len6","_key6","instance","audio","currentPlayingButton","ringInternalElem","getElementById","playButtonInternal","browseButtonInternal","fileInputInternal","customNameInternal","ringExternalElem","playButtonExternal","browseButtonExternal","fileInputExternal","customNameExternal","CUSTOM_FILE_INTERNAL","CUSTOM_FILE_EXTERNAL","CUSTOM_NAME_INTERNAL","CUSTOM_NAME_EXTERNAL","msg","ringInternal","ring","startsWith","ringExternal","updateCustomNames","addOptionMenu","idMenu","menu","newOption","stopAudio","pause","currentTime","classList","togglePlay","button","ringElem","isCurrentlyPlaying","contains","customKey","localStorage","getItem","getAudioPath","Audio","loop","play","handleFileSelect","file","size","alert","reader","FileReader","base64","customFileKey","customNameKey","setItem","customData","readAsDataURL","nameInternal","nameExternal","textContent","lang","click","files","en","translation","fr","innerHTML"],"sourceRoot":""}